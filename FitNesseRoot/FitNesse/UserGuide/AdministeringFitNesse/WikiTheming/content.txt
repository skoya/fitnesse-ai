(new since April 2012)

As of April 2012, !-FitNesse-! has a new layout. There are a few reasons for making this (incompatible) change:

 * !-FitNesse-! had quite a techie edge to it. The menu items were not well structured and some pages looked messy (like Search)
 * Web standards have evolved, so should !-FitNesse-!
 * Lots of markup was generated directly from java code, now [[Velocity][http://velocity.apache.org]] is performing the rendering
 * !-FitNesse-! was not easy to customize
 * The web interface looked old fashioned. Having a fresh look and feel appeals to people (yes it does)
 * !-FitNesse-! style related files (css, javascript, templates) were put in !-FitNesseRoot-!. This is not desired since it mixes application files with user data (with pages)

So here you are, in your new !-FitNesse-!, with a look and feel you're not accustomed to. How to deal with that?

!2 Theming to the rescue
One of the benefits you'll have from the new layout is that the page L&F is easier to change. !-FitNesse-! comes with a few styles built-in:

 * ''fitnesse_tailwind'' - the default style (Tailwind-inspired, responsive layout)
 * ''fitnesse_tailwind_slate'' - a cooler Tailwind-inspired variant
 * ''fitnesse_straight'' - a compact style
 * ''fitnesse_mint'' - a classic style
 * ''fitnesse_topnav'' - a minimalistic style
 * ''fitnesse_classic'' - legacy FitNesse styling
 * ''bootstrap'' - uses [[Twitter Bootstrap][http://twitter.github.com/bootstrap]] as a basis for its styling

''UX update'': !-FitNesse-! now defaults to ''fitnesse_tailwind'' to improve readability and responsiveness on smaller screens. If you prefer a previous look, switch themes from the header drop-down or set the Theme property in !-plugins.properties-!.

For all styles the HTML remains the same. The default style can be configured through ''plugins.properties'', !-FitNesse-!'s settings file (this is where you also configure custom symbols). Add the line

{{{
Theme=fitnesse_mint
}}}
(re)start !-FitNesse-! and the style will have completely changed.

!2 Switching themes in the UI
FitNesse.ai includes a theme switcher in the page header. Select a theme from the drop-down to apply it immediately. Your selection is stored in a browser cookie named !-fitnesse_theme-! and overrides the server default for that browser.

''UX update'': Tailwind themes now offer a light/dark toggle next to the Theme selector. It starts from your OS preference, then remembers your choice per browser so long sessions stay readable.

!2 Light and dark mode
The Tailwind themes support both light and dark palettes. Click the ''Dark'' / ''Light'' toggle in the header to switch. The selection is stored in browser local storage under !-fitnesse_color_mode-!.

For custom themes, target the data attribute on the body:

{{{
body[data-color-mode="dark"] {
  /* dark overrides */
}
}}}

!mermaid
flowchart LR
  A[Visit page] --> B{Saved color mode?}
  B -- yes --> C[Apply saved mode]
  B -- no --> D{OS prefers dark?}
  D -- yes --> E[Use dark]
  D -- no --> F[Use light]
!endmermaid

!plantuml
@startuml
actor User
participant "Browser" as Browser
participant "FitNesse" as App
User -> App: Load page
App -> Browser: Read fitnesse_color_mode
Browser --> App: Mode or empty
App -> App: Apply data-color-mode
User -> App: Toggle mode
App -> Browser: Store fitnesse_color_mode
@enduml
!endplantuml

Apart from the layout style, fitnesse loads a few stylesheets by default: ''fitnesse_pages.css'' and ''fitnesse_wiki.css''. Both files serve the boilerplate for pages (like the properties page) and the wiki text.

!mermaid
flowchart LR
  A[Server default theme] --> B{fitnesse_theme cookie?}
  B -- yes --> C[Use cookie theme]
  B -- no --> D[Use server default]
  C --> E[Load theme CSS + JS]
  D --> E
!endmermaid

!plantuml
@startuml
actor User
participant "FitNesse" as App
participant "Theme assets" as Assets
User -> App: Request page
App -> App: Resolve theme (config + cookie)
App -> Assets: Load /files/fitnesse/css/<theme>.css\nLoad /files/fitnesse/javascript/<theme>.js
App --> User: Rendered page
@enduml
!endplantuml

!2 Rolling your own
FitNesse still has the ability to support custom user styling. In [[!-FitNesseRoot/files/fitnesse-!][/files/fitnesse]] you can place your own files. Stylesheets go in a ''css'' directory, Javascript in ''javascript'' and images are filed in the ''images'' folder (note: those directories are not present by default, you'll have to create them by hand).

Now say you want to create your own style, named ''my-style''. You'll need to create a stylesheet ''!-FitNesseRoot/files/fitnesse/css/my-style.css-!'' and an optional Javascript file ''!-FitNesseRoot/files/fitnesse/javascript/my-style.js-!''.

The stylesheet can contain just your own styling or a combination of existing styles with your own additions on top of it.

To reuse one of the existing styles as an entry point, create a custom css file and import the base style you like to use, e.g.:

{{{
@import url(fitnesse_straight.css); 
}}}

Now you can simply add custom elements to it.
For example, changing the logo to something fitting your project can be done by placing a 200 x 37 logo file names ''fitnesse-logo-small.png'' file in files/images/ and then shift-f5 reloading the page.

!3 Create a theme based on Bootstrap
The Bootstrap theme took a slightly different route. It's using a subfolder for it's resources. The skeleton.vm template  ([[files/fitnesse/bootstrap/templates/skeleton.vm][http://files/fitnesse/bootstrap/templates/skeleton.vm]]) contains the general markup and layout. It also contains references to the other resources used. You can find the resources used to compile the bootstrap style (lesscss templates) in fitnesse.jar: fitnesse/resources/bootstrap/less. Use those as a basis for the custom theme. There are a few more template files that are overwritten by the bootstrap theme. If the theme needs to be reusable, refer (''#parse'') the the bootstrap templates for a start and add your own customisations along the way.

!2 Packaging themes
It's also possible to distribute themes in jar files (for example if you want to support a corporate theme for all your !-FitNesse-! projects). For that, package the css and javascript in a jar file, like this:

 * fitnesse/resources/css/my-style.css
 * fitnesse/resources/javascript/my-style.js
 * fitnesse/resources/images/some-image.png

Add the jar file to your classpath and define the style (''my-style'') in your ''plugins.properties''.
